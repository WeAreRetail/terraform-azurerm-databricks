# Azure Aware Databricks

[![Build Status](https://dev.azure.com/weareretail/Tooling/_apis/build/status/mod_azu_databricks?repoName=mod_azu_databricks&branchName=master)](https://dev.azure.com/weareretail/Tooling/_build/latest?definitionId=11&repoName=mod_azu_databricks&branchName=master)[![Unilicence](https://img.shields.io/badge/licence-The%20Unilicence-green)](LICENCE)

Common Azure Terraform module to normalize Azure Databricks creation.

# Usage

```hcl
module "aware_databricks" {
  source = "weareretail/databricks/azurerm"

  resource_group_name             = module.databricks_group.name
  nsg_name                        = azurerm_network_security_group.nsg_databricks.name
  private_subnet_address_prefixes = [cidrsubnet(local.address_space, 2, 1)]
  public_subnet_address_prefixes  = [cidrsubnet(local.address_space, 2, 2)]
  caf_prefixes                    = module.databricks_naming.resource_prefixes
  vnet_name                       = module.databricks_virtual_network.name
}

```

***Autogenerated file - do not edit***

#### Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.0.0 |
| <a name="requirement_azurecaf"></a> [azurecaf](#requirement\_azurecaf) | >= 1.2.16 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >=3.0.2 |

#### Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_nsg_name"></a> [nsg\_name](#input\_nsg\_name) | Databricks virtual network NSG resource name. | `string` | n/a | yes |
| <a name="input_private_subnet_address_prefixes"></a> [private\_subnet\_address\_prefixes](#input\_private\_subnet\_address\_prefixes) | Databricks private subnet IP ranges. | `list(string)` | n/a | yes |
| <a name="input_public_subnet_address_prefixes"></a> [public\_subnet\_address\_prefixes](#input\_public\_subnet\_address\_prefixes) | Databricks public subnet IP ranges. | `list(string)` | n/a | yes |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | Resource group name. | `string` | n/a | yes |
| <a name="input_vnet_name"></a> [vnet\_name](#input\_vnet\_name) | Injected virtual network name. | `string` | n/a | yes |
| <a name="input_caf_prefixes"></a> [caf\_prefixes](#input\_caf\_prefixes) | Prefixes to use for caf naming. | `list(string)` | `[]` | no |
| <a name="input_description"></a> [description](#input\_description) | Resource description. | `string` | `""` | no |

#### Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | Workspace ID. |
| <a name="output_managed_group_name"></a> [managed\_group\_name](#output\_managed\_group\_name) | Databricks managed resource group name. |
| <a name="output_storage_id"></a> [storage\_id](#output\_storage\_id) | Databricks DBFS storage account resource id. |
| <a name="output_storage_name"></a> [storage\_name](#output\_storage\_name) | Databricks DBFS storage account name. |
| <a name="output_workspace_name"></a> [workspace\_name](#output\_workspace\_name) | Workspace URL. |
| <a name="output_workspace_url"></a> [workspace\_url](#output\_workspace\_url) | Workspace URL. |

<!-- BEGIN_TF_DOCS -->
#### Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.0.0 |
| <a name="requirement_azurecaf"></a> [azurecaf](#requirement\_azurecaf) | >= 1.2.16 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >=3.0.2, <4.0.0 |

#### Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_nsg_name"></a> [nsg\_name](#input\_nsg\_name) | Databricks virtual network NSG resource name. | `string` | n/a | yes |
| <a name="input_private_subnet_address_prefixes"></a> [private\_subnet\_address\_prefixes](#input\_private\_subnet\_address\_prefixes) | Databricks private subnet IP ranges. | `list(string)` | n/a | yes |
| <a name="input_public_subnet_address_prefixes"></a> [public\_subnet\_address\_prefixes](#input\_public\_subnet\_address\_prefixes) | Databricks public subnet IP ranges. | `list(string)` | n/a | yes |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | Resource group name. | `string` | n/a | yes |
| <a name="input_vnet_name"></a> [vnet\_name](#input\_vnet\_name) | Injected virtual network name. | `string` | n/a | yes |
| <a name="input_caf_prefixes"></a> [caf\_prefixes](#input\_caf\_prefixes) | Prefixes to use for caf naming. | `list(string)` | `[]` | no |
| <a name="input_description"></a> [description](#input\_description) | Resource description. | `string` | `""` | no |
| <a name="input_enable_log_storage"></a> [enable\_log\_storage](#input\_enable\_log\_storage) | Enable a dedicated storage for clusters logs. | `bool` | `false` | no |
| <a name="input_service_endpoint_list"></a> [service\_endpoint\_list](#input\_service\_endpoint\_list) | List of service endpoint to enable on Databricks vnets | `list(string)` | `[]` | no |

#### Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | Workspace ID. |
| <a name="output_logs_storage_id"></a> [logs\_storage\_id](#output\_logs\_storage\_id) | The logs storage account id. |
| <a name="output_logs_storage_name"></a> [logs\_storage\_name](#output\_logs\_storage\_name) | The logs storage account name. |
| <a name="output_managed_group_name"></a> [managed\_group\_name](#output\_managed\_group\_name) | Databricks managed resource group name. |
| <a name="output_storage_id"></a> [storage\_id](#output\_storage\_id) | Databricks DBFS storage account resource id. |
| <a name="output_storage_name"></a> [storage\_name](#output\_storage\_name) | Databricks DBFS storage account name. |
| <a name="output_workspace_name"></a> [workspace\_name](#output\_workspace\_name) | Workspace URL. |
| <a name="output_workspace_url"></a> [workspace\_url](#output\_workspace\_url) | The workspace URL which is of the format 'adb-{workspaceId}.{random}.azuredatabricks.net' |
<!-- END_TF_DOCS -->